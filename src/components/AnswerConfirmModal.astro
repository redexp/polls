---
import Modal from './Modal.astro';
import LoginButton from './LoginButton.astro';
---

<Modal
	id="answer-confirm"
	title="–Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è"
>
	<p>
        –ù–∞—Ç–∏—Å–∫–∞—é—á–∏ –∫–Ω–æ–ø–∫—É ¬´–ü–æ–≥–æ–¥–∂—É—é—Å—å¬ª, –í–∏ –¥–∞—î—Ç–µ –∑–≥–æ–¥—É –Ω–∞ –æ–±—Ä–æ–±–∫—É —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ –í–∞—à—É <strong>—Å—Ç–∞—Ç—å</strong>, <strong>–≤—ñ–∫</strong> —ñ <strong>—Ä–∞–π–æ–Ω –í–∞—à–æ—ó —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</strong>. <a href="/faq/#data" target="_blank" title="–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ –æ–±—Ä–æ–±–∫—É –í–∞—à–∏—Ö –¥–∞–Ω–∏—Ö">‚ÑπÔ∏è –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ</a>
	</p>
	<p>–°–∏—Å—Ç–µ–º–∞ BankID –ù–ë–£ –ø–µ—Ä–µ–¥–∞—Å—Ç—å –Ω–∞–º –±—ñ–ª—å—à–µ –í–∞—à–∏—Ö –¥–∞–Ω–∏—Ö, –∞–ª–µ –∑–±–µ—Ä–µ–∂–µ–º–æ —Ç–∞ <strong>–ø–µ—Ä–µ—Ç–≤–æ—Ä–∏–º–æ</strong> –º–∏ –ª–∏—à–µ —Ç—ñ —â–æ –∑–∞–∑–Ω–∞—á–∏–ª–∏ –≤–∏—â–µ.<br><a href="/faq/#bankid" target="_blank" title="–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ –°–∏—Å—Ç–µ–º—É BankID –ù–ë–£">‚ÑπÔ∏è –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ</a></p>
    <ul class="data-list">
        <li>–ü–Ü–ë</li>
        <li>–†–ù–û–ö–ü–ü</li>
        <li><strong>–î–∞–Ω—ñ —â–æ–¥–æ –º—ñ—Å—Ü—è –ø–µ—Ä–µ–±—É–≤–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–Ω—è</strong> <a href="/faq/#address">‚ÑπÔ∏è</a></li>
        <li>–î–∞–Ω—ñ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç—É</li>
        <li><strong>–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</strong></li>
        <li>–ì—Ä–æ–º–∞–¥—è–Ω—Å—Ç–≤–æ</li>
        <li><strong>–°—Ç–∞—Ç—å</strong></li>
    </ul>
    <p>
        –¶—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –Ω–µ –±—É–¥–µ –ø—É–±–ª—ñ—á–Ω–æ—é.
	</p>

	<Fragment slot="footer">
		<LoginButton
			id="confirm-auth-btn"
			loginTitle="–ü–æ–≥–æ–¥–∏—Ç–∏—Å—å —Ç–∞ —É–≤—ñ–π—Ç–∏ –∑"
			logout={false}
			size="lg"
		/>

        <button
			id="confirm-btn"
			type="button"
			class="btn btn-primary"
			style="min-width: 122px"
        >
            <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
            <span class="text">–ü–æ–≥–æ–¥–∂—É—é—Å—å</span>
            <span class="text">üëå –ó–±–µ—Ä–µ–∂–µ–Ω–æ</span>
		</button>

        <button
			type="button"
			class="btn btn-light"
			data-close
		>–í—ñ–¥–º–æ–≤–∏—Ç–∏—Å—å</button>
	</Fragment>
</Modal>

<style lang="less">
	label.btn {
		input {
			opacity: 0;
			width: 1px;
			height: 1px;
		}

		+ div {
			display: none;
		}

		&:has(input:checked) + div {
			display: block;
		}
	}

	#confirm-btn {
		.text:last-child {
			display: none;
		}

		&.btn-success {
			.text {
				display: none;
			}

			.text:last-child {
				display: inline;
			}
		}
	}
</style>

<script>
	import {onChange} from '../lib/auth';
	import {byId, qs} from '../lib/dom';

	onChange(authed => {
		qs('#answer-confirm .modal-header').classList.toggle('d-none', authed);
		byId('confirm-auth-btn').classList.toggle('d-none', authed);
		byId('confirm-btn').classList.toggle('d-none', !authed);
	});
</script>